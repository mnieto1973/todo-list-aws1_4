// Obtener el nombre de la rama actual
def branchName = env.BRANCH_NAME

// Definir el nombre del Jenkinsfile específico basado en la rama
def jenkinsFilePath = ""
if (branchName == "develop") {
    jenkinsFilePath = "JenkinsfileStagingSeparado"
} else if (branchName == "master") {
    jenkinsFilePath = "JenkinsfileProductionSeparado"
} else {
    error "No Jenkinsfile defined for branch ${branchName}"
}

// Verificar si el Jenkinsfile específico existe en el sistema de archivos
def jenkinsFileExists = fileExists(jenkinsFilePath)
if (!jenkinsFileExists) {
    error "The specified Jenkinsfile (${jenkinsFilePath}) does not exist in branch ${branchName}"
}

// Cargar y ejecutar el Jenkinsfile específico de la rama
load jenkinsFilePath
